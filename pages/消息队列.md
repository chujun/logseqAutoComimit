- ## 什么是消息队列
  我们可以把消息队列看作是一个存放消息的容器，当我们需要使用消息的时候，直接从容器中取出消息供自己使用即可。
  ![image.png](../assets/image_1656328618831_0.png) 
  消息队列是分布式系统中重要的组件之一。使用消息队列主要是为了通过异步处理提高系统性能和削峰、降低系统耦合性。
  我们知道队列 Queue 是一种先进先出的数据结构，所以消费消息时也是按照顺序来消费的。
- 使用消息队列的好处
	- 1. **通过异步处理提高系统性能（减少响应所需时间）。**
	  ![image.png](../assets/image_1656328724361_0.png)
	  将用户的请求数据存储到消息队列之后就立即返回结果。随后，系统再对消息进行消费。
	  
	  因为用户请求数据写入消息队列之后就立即返回给用户了，但是请求数据在后续的业务校验、写数据库等操作中可能失败。因此，**使用消息队列进行异步处理之后，需要适当修改业务流程进行配合**，比如用户在提交订单之后，订单数据写入消息队列，不能立即返回用户订单提交成功，需要在消息队列的订单消费者进程真正处理完该订单之后，甚至出库后，再通过电子邮件或短信通知用户订单成功，以免交易纠纷。这就类似我们平时手机订火车票和电影票。
	- 2. **削峰/限流**
	  **先将短时间高并发产生的事务消息存储在消息队列中，然后后端服务再慢慢根据自己的能力去消费这些消息，这样就避免直接把后端服务打垮掉。**
	  业务场景举例：在电子商务一些秒杀、促销活动中，合理使用消息队列可以有效抵御促销活动刚开始大量订单涌入对系统的冲击。如下图所示：
	  ![image.png](../assets/image_1656328831938_0.png){:height 598, :width 1066}
	- 3. **降低系统耦合性。**
	  使用消息队列还可以降低系统耦合性。我们知道如果模块之间不存在直接调用，那么新增模块或者修改模块就对其他模块影响较小，这样系统的可扩展性无疑更好一些。还是直接上图吧：
	  ![image.png](../assets/image_1656328884399_0.png)
	  生产者（客户端）发送消息到消息队列中去，接受者（服务端）处理消息，需要消费的系统直接去消息队列取消息进行消费即可而不需要和其他系统有耦合，这显然也提高了系统的扩展性。
- 常见消息队列中间件
  [[rocketmq]]
  [[kafka]]
  [[RabbitMQ]]
-
- 基础知识
  索引
  索引是一种用于快速查询和检索数据的数据结构。常见的索引结构有: B 树， B+树和 Hash。
  --->类比书的目录
  索引优点:
  a. 使用索引可以大大加快 数据的检索速度（大大减少检索的数据量）, 这也是创建索引的最主要的原因。
  b. 通过创建唯一性索引，可以保证数据库表中每一行数据的唯一性。
  索引缺点:
  创建索引和维护索引需要耗费许多时间。当对表中的数据进行增删改的时候，如果数据有索引，那么索引也需要动态的修改，会降低 SQL 执行效率。
  索引需要使用物理文件存储，也会耗费一定空间。
  
  但是，使用索引一定能提高查询性能吗?
  大多数情况下，索引查询都是比全表扫描要快的。但是如果数据库的数据量不大，那么使用索引也不一定能够带来很大提升。
- MySQL索引的底层数据结构:B+树
  为什么不选择其他类型数据结构，例如hash，B树
  不选hash
  1.Hash 冲突问题 ：我们上面也提到过Hash 冲突了，不过对于数据库来说这还不算最大的缺点。
  2.Hash 索引不支持顺序和范围查询(最大的缺点)： 假如我们要对表中的数据进行排序或者进行范围查询，那 Hash 索引可就不行了。
  
  B树和B+树数据结构区别
  ((62ac3744-38c3-4b55-8676-4dedff504ccd))
  
  在 MySQL 中，MyISAM 引擎和 InnoDB 引擎都是使用 B+Tree 作为索引结构，但是，两者的实现方式差别？
  MyISAM 引擎中，B+Tree 叶节点的 data 域存放的是数据记录的地址。在索引检索的时候，首先按照 B+Tree 搜索算法搜索索引，如果指定的 Key 存在，则取出其 data 域的值，然后以 data 域的值为地址读取相应的数据记录。这被称为“非聚簇索引”。
  
  InnoDB 引擎中，其数据文件本身就是索引文件。相比 MyISAM，索引文件和数据文件是分离的，其表数据文件本身就是按 B+Tree 组织的一个索引结构，树的叶节点 data 域保存了完整的数据记录。这个索引的 key 是数据表的主键，因此 InnoDB 表数据文件本身就是主索引。这被称为“聚簇索引（或聚集索引）”，而其余的索引都作为辅助索引，辅助索引的 data 域存储相应记录主键的值而不是地址，这也是和 MyISAM 不同的地方。在根据主索引搜索时，直接找到 key 所在的节点即可取出数据；在根据辅助索引查找时，则需要先取出主键的值，再走一遍主索引。 因此，在设计表的时候，不建议使用过长的字段作为主键，也不建议使用非单调的字段作为主键，这样会造成主索引频繁分裂。
-
-
-
- 索引类型
- [mysql一张表到底能存多少数据？](https://segmentfault.com/a/1190000039239998)
  1. 查看innodb数据页有多大，2^14=16K=16384字节
  ```
  mysql> SHOW GLOBAL STATUS LIKE 'innodb_page_size';
  +------------------+-------+
  | Variable_name    | Value |
  +------------------+-------+
  | Innodb_page_size | 16384 |
  +------------------+-------+
  1 row in set (0.00 sec)
  ```
  2. 计算每个节点大小
  ![image.png](../assets/image_1655467470670_0.png)
  ![image.png](../assets/image_1655467551735_0.png) 
  主键大小如果是bigint的话，占有8字节
  指向下一页索引的地址大小，占有6字节，这个寻址能力已经很高了
  4字节--->2的32次是4G,
  5字节--->4G*256=1T,
  6字节--->1T*256=256T,
  现有商用超大内存也就几个T，十几个T,寻址空间完全满足需求了
  节点大小=主键大小+指向下一页索引的地址大小=8+6=14bytes
  3. 根节点结算数据存储个数
  16K/14bytes=16384/14=1170
  4. 其余层节点计算
  第二层数据存储个数=1170*1170=1368900(百万级别)
  5.叶子节点层计算
  聚簇索引叶子节点是存储记录数据的,如果记录字段很多的话,
-
-